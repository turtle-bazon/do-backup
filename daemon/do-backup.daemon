;;;; -*- mode: lisp -*-

(with-output-to-string (*standard-output*)
 (asdf:oos 'asdf:load-op 'do-backup)
 (asdf:oos 'asdf:load-op 'clon))

(defparameter *name* "do-backup")

(defparameter *pidfile* #P"/var/run/do-backup.pid")

(defparameter *start-program*
  #'(lambda ()
      (clon:schedule-function
       #'(lambda ()
	   (do-backup:do-backup "/etc/do-backup.conf"))
       (clon:make-scheduler
	(clon:make-typed-cron-schedule :minute 0 :hour 3 :day-of-month '*))
       :thread t)))
